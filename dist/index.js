!function(t){var e={};function s(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=5)}([function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e,s=null){this.data=null,this._rows=0,this._cols=0,this.data=[...Array(t)].map((t,r)=>[...Array(e)].map((t,e)=>s?s[r][e]:Math.floor(10*Math.random()))),this._rows=t,this._cols=e}get rows(){return this._rows}get cols(){return this._cols}set rows(t){this._rows=t}set cols(t){this._cols=t}get(t,e){if(t>=this._rows||t<0||e>=this._cols||e<0)throw new Error("Index out of bounds");return this.data[t][e]}set(t,e,s){if(t>=this._rows||t<0||e>=this._cols||e<0)throw new Error("Index out of bounds");return this.data[t][e]=s}isSquare(){return this._rows===this._cols}isNpair(){return this._rows===this._cols&&this._rows%2==0}addN(t,e){for(let s=1;s<=t;s++)this.data.push(new Array(this._cols).fill(e));this.data=this.data.map(s=>s.concat(new Array(t).fill(e))),this._cols+=t,this._rows+=t}split(){if(!this.isNpair())throw new Error("n is not pair");return[this.subMatrix(this._rows/2,this._rows-1,this._cols/2,this._cols-1),this.subMatrix(this._rows/2,this._rows-1,0,this._cols/2-1),this.subMatrix(0,this._rows/2-1,this._cols/2,this._cols-1),this.subMatrix(0,this._rows/2-1,0,this._cols/2-1)]}display(){t.stdout.write("[");for(let e=0;e<this._rows;++e){0!=e&&t.stdout.write(" "),t.stdout.write("[");for(let s=0;s<this._cols;++s)t.stdout.write(this.data[e][s].toString()),s!=this._cols-1&&t.stdout.write(" ");t.stdout.write("]"),e==this._rows-1&&t.stdout.write("]"),t.stdout.write("\n")}}subMatrix(t,e,r,o){let n=new s(this._rows-(e-t+1),this._cols-(o-r+1));for(let s=0,i=0;s<this._rows;s++)if(s<t||s>e){for(let t=0,e=0;t<this._cols;t++)(t<r||t>o)&&(n.data[i][e]=this.data[s][t],++e);++i}return n}minus(t){let e=new s(this.rows,this.cols);for(let s=0;s<this.rows;s++)for(let r=0;r<this.cols;r++)e.set(s,r,this.get(s,r)-t.get(s,r));return e}plus(t){if(t.rows!==this.rows||t.cols!=this.cols)throw new Error("Size mismatch");let e=new s(this.rows,this.cols);for(let s=0;s<this.cols;s++)for(let r=0;r<this.rows;r++)e.set(s,r,this.get(s,r)+t.get(s,r));return e}coef(t){for(let e=0;e<this.cols;e++)for(let s=0;s<this.rows;s++)this.set(e,s,this.get(e,s)*t);return this}getRow(t){return this.data[t]}merge(t,e,s){this.data=this.data.map((e,s)=>e.concat(t.getRow(s)));for(let t=0;t<e.rows;t++)this.data.push(e.getRow(t).concat(s.getRow(t)));return this.rows+=e.rows,this.cols+=t.cols,this}}e.Matrix=s}).call(this,s(4))},function(t,e){!function(){var t=!1;try{document}catch(e){t=!0}t&&(self.Worker||(self.Worker=function(t){var e=this;this.id=Math.random().toString(36).substr(2,5),this.eventListeners={message:[]},self.addEventListener("message",function(t){if(t.data._from===e.id){var s=new MessageEvent("message");s.initMessageEvent("message",!1,!1,t.data.message,e,"",null,[]),e.dispatchEvent(s),e.onmessage&&e.onmessage(s)}});var s=self.location.pathname,r="/"==t.charAt(0)?t:"/"+t,o=s.substring(0,s.lastIndexOf("/"))+r;self.postMessage({_subworker:!0,cmd:"newWorker",id:this.id,path:o})},Worker.prototype={onerror:null,onmessage:null,postMessage:function(t,e){self.postMessage({_subworker:!0,id:this.id,cmd:"passMessage",message:t,transfer:e},e)},terminate:function(){self.postMessage({_subworker:!0,cmd:"terminate",id:this.id})},addEventListener:function(t,e,s){this.eventListeners[t]&&this.eventListeners[t].push(e)},removeEventListener:function(t,e,s){if(t in this.eventListeners){var r=this.eventListeners[t].indexOf(e);-1!==r&&this.eventListeners[t].splice(r,1)}},dispatchEvent:function(t){for(var e=this.eventListeners[t.type],s=0;s<e.length;s++)e[s](t)}}));var e={},s={newWorker:function(t){var s=new Worker(t.data.path);s.addEventListener("message",function(e){var s={_from:t.data.id,message:e.data};t.target.postMessage(s)}),e[t.data.id]=s},terminate:function(t){e[t.data.id].terminate()},passMessage:function(t){e[t.data.id].postMessage(t.data.message,t.data.transfer)}},r=function(t){t.data._subworker&&s[t.data.cmd](t)},o=Worker;Worker=function(t){if(this.constructor!==Worker)throw new TypeError("Failed to construct 'Worker': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var e=t.indexOf("blob:");-1!==e&&0!==e&&(t=t.substring(e));var s=new o(t);return s.addEventListener("message",r),s}}()},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0);s(1);e.Strassen=class{run(t,e){if(!t.isSquare()||!e.isSquare()||t.rows!==e.rows)throw new Error("Unsupported operation");return this.compute(t,e)}compute(t,e){if(1===t.cols)return new r.Matrix(1,1,[[t.get(0,0)*e.get(0,0)]]);{let s=void 0;t.isNpair()||(s=this.nextPowerOfTwo(t.cols)-t.cols,t.addN(s,0),e.addN(s,0));let r,o=new Worker("/workers/AsplitWorker.js");o.onmessage=(t=>{r=t}),o.postMessage(t),console.log(r);let n=t.split()[0],i=t.split()[1],a=t.split()[2],u=t.split()[3],l=e.split()[0],c=e.split()[1],h=e.split()[2],f=e.split()[3],d=this.compute(n.minus(i),f),w=this.compute(a.minus(u),l),p=this.compute(u,l.plus(h)),m=this.compute(n,c.plus(f)),g=this.compute(n.plus(u),f.minus(l)),_=this.compute(n.plus(a),l.plus(c)),v=this.compute(i.plus(u),h.plus(f)),b=d.minus(p).minus(g).plus(v),y=m.minus(d),M=w.plus(p),x=w.coef(-1).minus(m).plus(g).plus(_);return s?b.merge(y,M,x).subMatrix(t.rows-s-1,t.rows-1,t.cols-s-1,t.cols-1):b.merge(y,M,x)}}nextPowerOfTwo(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,1+(t|=t>>16))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0);e.Naive=class{run(t,e){if(t.rows!==e.cols)throw new Error("Unsupported operation");let s=new r.Matrix(t.rows,e.cols);for(let r=0;r<t.cols;r++)for(let o=0;o<e.rows;o++)for(let n=0;n<t.cols;n++)s.set(r,o,s.get(r,o)+t.get(r,n)*e.get(n,o));return s}}},function(t,e){var s,r,o=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(s===setTimeout)return setTimeout(t,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(t){s=n}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function w(t,e){this.fun=t,this.array=e}function p(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];l.push(new w(t,e)),1!==l.length||c||a(d)},w.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(0),o=s(3),n=s(2);let i=new r.Matrix(512,512),a=new r.Matrix(512,512),u=(new o.Naive,new n.Strassen),l=Date.now();u.run(i,a),console.log(Date.now()-l)}]);
//# sourceMappingURL=index.js.map